script(type="text/javascript").
	$(window).ready(function() {
		var toBeLoaded = {},
			imageCount = 0,
			imageToBeLoaded = [];

		$(document).find('*').each(function() { 
			var imageUrl = $(this).css('backgroundImage');
			var	valuePattern = /url\(\s*(['"]?)(.*?)\1\s*\)/g,
				keyPattern = /photos\/(['"]?)(.*?)\1\s*\)/g;
			if(imageUrl !== "none") {
				var key = keyPattern.exec(imageUrl),
					value = valuePattern.exec(imageUrl);

				if(key !== null && value !== null) {
					toBeLoaded[key[2]] = value[2];
					imageToBeLoaded.push(value[2]);
				}
			}
		});

		imageCount = imageToBeLoaded.length;

		imageToBeLoaded.forEach(function(src) {
			var image = new Image();
			image.src =	src;
			$(image).one('load error', function() {
				imageCount--;
				if(imageCount === 0) {
					$('body').addClass('content-loaded');
				}
			}).each(function() {
				if(this.complete || typeof this.complete === 'undefined') { 
					$(this).load();
				}
			});
		});
	});